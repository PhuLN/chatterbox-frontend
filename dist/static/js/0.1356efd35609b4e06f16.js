webpackJsonp([0],{Lbpk:function(t,e){},MukE:function(t,e){},NjXh:function(t,e){},P2Sd:function(t,e){},Rhw4:function(t,e){},Wn5s:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box groupbox group-layout",on:{click:t.joinChat}},[s("div",{staticStyle:{display:"flex"}},[s("figure",{staticClass:"image is-48x48"},[s("img",{staticClass:"round-image",attrs:{src:t.chatDetails.roomImage,alt:""}})]),t._v(" "),s("p",{staticClass:"has-text-grey has-text-left",staticStyle:{"align-self":"center","margin-left":"5px"}},[s("span",{staticClass:"is-size-4 has-text-grey"},[t._v(t._s(t.chatDetails.roomName))])])]),t._v(" "),s("div",{staticStyle:{margin:"5px 0"}},[s("p",{staticClass:"has-text-grey has-text-left"},[t._v("\n      "+t._s(t.chatDetails.roomDescription)+"\n    ")])]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"group-footer"},[e("p",{staticClass:"has-text-grey has-text-right"},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}})]),this._v("\n      5/16 Online\n    ")])])}]};var i=s("VU/8")({props:["chatDetails"],methods:{joinChat:function(){this.$store.dispatch("setCurrentChat",this.chatDetails),this.$store.dispatch("clearMessages"),this.$store.dispatch("fetchMessagesInChat"),this.$store.dispatch("fetchChatMembers"),this.$socket.emit("attemptJoinChat",this.chatDetails.roomName)}}},a,!1,function(t){s("Lbpk")},"data-v-5cfdcdb6",null).exports,n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{attrs:{action:""}},[s("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[t._m(0),t._v(" "),s("section",{staticClass:"modal-card-body"},[s("b-field",{attrs:{label:"Name"}},[s("b-input",{attrs:{placeholder:"Chatroom name",required:""},model:{value:t.roomName,callback:function(e){t.roomName=e},expression:"roomName"}})],1),t._v(" "),s("b-field",{attrs:{label:"Description"}},[s("b-input",{attrs:{placeholder:"Chatroom description",required:""},model:{value:t.roomDesc,callback:function(e){t.roomDesc=e},expression:"roomDesc"}})],1)],1),t._v(" "),s("footer",{staticClass:"modal-card-foot"},[s("input",{staticClass:"button",attrs:{type:"button",value:"Close"},on:{click:function(e){t.$parent.close()}}}),t._v(" "),s("input",{staticClass:"button is-primary",attrs:{type:"button",value:"Create"},on:{click:function(e){t.CreateChatroom()}}})])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[this._v("Create a new chat room")])])}]},r=s("VU/8")({data:function(){return{roomName:"",roomDesc:""}},methods:{CreateChatroom:function(){var t=this;this.$store.dispatch("createChatroom",{name:this.roomName,description:this.roomDesc}).then(function(){t.$parent.close()})}}},n,!1,null,null,null).exports,o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{attrs:{action:""}},[s("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[t._m(0),t._v(" "),s("section",{staticClass:"modal-card-body has-text-centered"},[s("div",{staticClass:"field"},[s("p",[t._v("Enter invite code")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"field"},[s("input",{staticClass:"button is-primary",attrs:{type:"button",value:"Join"},on:{click:t.joinChat}})])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[this._v("Invite members to chat with")])])}]};var c=s("VU/8")({data:function(){return{code:""}},methods:{joinChat:function(){var t=this;this.$store.dispatch("joinChatroom",this.code).then(function(){t.$parent.close()}).catch(function(e){t.$toast.open({message:e.response.data.error,type:"is-danger",queue:!1,duration:3e3,position:"is-bottom-right"})})}}},o,!1,function(t){s("MukE")},"data-v-35db3b5c",null).exports,l={components:{Chat:i,CreateGroup:r,JoinGroup:c},data:function(){return{topMenuIsActive:!1}},methods:{launchChatRoomCreator:function(){this.$modal.open({component:r,parent:this})},launchChatJoiner:function(){this.$modal.open({component:c,parent:this})}},computed:{getAccessibleChats:function(){return this.$store.getters.getAccessibleChats}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"has-text-centered connectedAsHeader"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.topMenuIsActive,expression:"topMenuIsActive"}],attrs:{id:"burger",type:"checkbox"},domProps:{checked:Array.isArray(t.topMenuIsActive)?t._i(t.topMenuIsActive,null)>-1:t.topMenuIsActive},on:{change:function(e){var s=t.topMenuIsActive,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&(t.topMenuIsActive=s.concat([null])):n>-1&&(t.topMenuIsActive=s.slice(0,n).concat(s.slice(n+1)))}else t.topMenuIsActive=i}}}),t._v(" "),t._m(0),t._v(" "),s("nav",{class:{overflowY:t.topMenuIsActive}},[s("div",{staticClass:"container",staticStyle:{"margin-top":"50px",display:"flex","justify-content":"center"}},[s("div",{staticClass:"column is-5"},[t._m(1),t._v(" "),t._l(t.getAccessibleChats,function(t){return s("Chat",{key:t._id,attrs:{chatDetails:t}})}),t._v(" "),s("h2",{staticClass:"crossed_out"}),t._v(" "),s("input",{staticClass:"button is-primary",attrs:{type:"button",value:"New chatroom"},on:{click:t.launchChatRoomCreator}}),t._v(" "),s("input",{staticClass:"button is-primary",attrs:{type:"button",value:"Join chatroom"},on:{click:t.launchChatJoiner}})],2)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"burger"}},[e("span"),this._v(" "),e("span"),this._v(" "),e("span")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"crossed_out"},[e("span",{staticClass:"chatlist_header"},[this._v("Your chats")])])}]};var d=s("VU/8")(l,u,!1,function(t){s("ptlD")},null,null).exports,h=s("mtWM"),m=s.n(h),v={data:function(){return{code:"",receivedCode:!1,isSingleUse:!1}},methods:{generateInviteCode:function(){var t=this;m()({method:"POST",url:"https://chatterbox-be.herokuapp.com/api/invite/create",contentType:"application/json; charset=utf-8",dataType:"json",headers:{Token:this.$store.getters.getToken},data:{chatId:this.$store.getters.getCurrentChat._id,isSingleUse:this.isSingleUse}}).then(function(e){t.code=e.data.code,t.receivedCode=!0})}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{attrs:{action:""}},[s("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[t._m(0),t._v(" "),s("section",{staticClass:"modal-card-body has-text-centered"},[t.receivedCode?s("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"input inviteinput",attrs:{type:"text"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}):s("div",[s("div",{staticClass:"field"},[s("p",{staticClass:"is-size-3 invitetxt",on:{click:t.generateInviteCode}},[t._v("\n            Click here to get an invite code\n          ")])]),t._v(" "),s("div",{staticClass:"field"},[s("b-checkbox",{model:{value:t.isSingleUse,callback:function(e){t.isSingleUse=e},expression:"isSingleUse"}},[t._v("I want this code to be single use")])],1)]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("\n        Invited users have to enter the code to gain access to the chat\n      ")]),t._v(" "),s("p",[t._v('\n        To do so, they must click on "Join group" and enter the code\n      ')])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[this._v("Invite members to chat with")])])}]};var f=s("VU/8")(v,p,!1,function(t){s("Rhw4")},"data-v-2782a47d",null).exports,g={components:{Invite:f},methods:{launchInviteGenerator:function(){this.$modal.open({component:f,parent:this})}},computed:{users:function(){return this.$store.getters.getMembers}}},C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("p",{staticClass:"has-text-white"},[t._v("Members")]),t._v(" "),s("ul",t._l(t.users,function(e){return s("li",{key:e._id,staticClass:"has-text-white"},[t._v(t._s(e.username))])})),t._v(" "),s("input",{staticClass:"button\n  is-primary",attrs:{type:"button",value:"Invite"},on:{click:t.launchInviteGenerator}})])},staticRenderFns:[]},_=s("VU/8")(g,C,!1,null,null,null).exports,b=s("M4fF"),x=s.n(b),y={props:["message"],computed:{author:function(){var t=this;return x.a.find(this.$store.getters.getMembers,function(e){return e._id===t.message.author})}}},$={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"chatMessage text-left"},[s("div",{staticClass:"msg-info"},[s("figure",{staticClass:"image is-48x48"},[s("img",{staticClass:"round-image",attrs:{src:t.author.profileImage,alt:""}})]),t._v(" "),s("div",[s("p",{staticClass:"author is-size-4 has-text-white-ter"},[t._v(t._s(t.author.username))]),t._v(" "),s("p",{staticClass:"has-text-grey is-size-7"},[t._v(t._s(t.message.createdAt))])])]),t._v(" "),s("div",[s("p",{staticClass:"has-text-white-ter chat-message"},[t._v("\n        "+t._s(t.message.message)+"\n      ")])])]),t._v(" "),s("hr",{staticClass:"message-divider"})])},staticRenderFns:[]};var M={data:function(){return{message:""}},methods:{sendMessage:function(){this.message&&(this.$socket.emit("sendMessage",{author:this.$store.getters.getUser._id,message:this.message,createdAt:new Date(Date.now()).toISOString()}),this.$store.dispatch("sendMessage",{chatId:this.$store.getters.getCurrentChat._id,text:this.message}))}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"input",attrs:{type:"text",name:"",id:"msg-box"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),s("input",{staticClass:"button is-primary",attrs:{type:"button",value:"Send"},on:{click:t.sendMessage}})])},staticRenderFns:[]};var I={components:{TopMenu:d,RightMenu:_,ChatMessage:s("VU/8")(y,$,!1,function(t){s("NjXh")},"data-v-c8665a24",null).exports,ChatBox:s("VU/8")(M,k,!1,function(t){s("P2Sd")},"data-v-5b611fa1",null).exports},mounted:function(){this.$store.dispatch("fetchAccessibleChats")},computed:{chatMessages:function(){return this.$store.getters.getMessages},hasSelectedChat:function(){return!x.a.isEmpty(this.$store.getters.getCurrentChat)},users:function(){return this.$store.getters.getMembers}},sockets:{newMessage:function(t){var e=this;console.log(t),this.$store.dispatch("receiveMessage",t).then(function(){var t=e.$el.querySelector(".main-section");t.scrollTop=t.scrollHeight}),console.log("after")},newUserJoined:function(){this.$store.dispatch("fetchChatMembers")}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"grid-wrapper"},[s("div",{staticClass:"top-menu"},[s("TopMenu")],1),t._v(" "),s("div",{staticClass:"left-menu"}),t._v(" "),s("div",{staticClass:"main-section box is-radiusless"},t._l(t.chatMessages,function(t){return s("ChatMessage",{key:t._id,attrs:{message:t}})})),t._v(" "),s("div",{staticClass:"right-menu"},[s("RightMenu")],1),t._v(" "),s("div",{staticClass:"lower-menu"},[t.hasSelectedChat?s("ChatBox"):t._e()],1)])},staticRenderFns:[]};var A=s("VU/8")(I,w,!1,function(t){s("xdEO")},"data-v-fcc9a92c",null);e.default=A.exports},ptlD:function(t,e){},xdEO:function(t,e){}});
//# sourceMappingURL=0.1356efd35609b4e06f16.js.map