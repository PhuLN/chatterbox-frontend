webpackJsonp([3],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),o=a("hMcO"),s=a.n(o),r=a("MMSg"),c=a.n(r),i=(a("doPI"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var u=a("VU/8")({name:"App"},i,!1,function(t){a("zqPf")},null,null).exports,h=a("/ocq"),p=a("NYxO"),m=a("424j"),f=a("mtWM"),d=a.n(f),g=a("M4fF"),l=a.n(g),b={state:{user:{}},getters:{getToken:function(t){return t.user.token},isAuthenticated:function(t){return!!t.user.token},getUser:function(t){return l.a.pick(t.user,["_id","username","profileImage"])}},actions:{userSignup:function(t,e){var a=t.commit;return d()({method:"POST",url:"https://chatterbox-be.herokuapp.com/api/users/signup",contentType:"application/json; charset=utf-8",dataType:"json",data:{user:e}}).then(function(t){a("setLoginDetails",t.data)})},userLogin:function(t,e){var a=t.commit;return d()({method:"POST",url:"https://chatterbox-be.herokuapp.com/api/users/login",contentType:"application/json; charset=utf-8",dataType:"json",data:{user:e}}).then(function(t){a("setLoginDetails",t.data)})},logoff:function(t){(0,t.commit)("logoff")}},mutations:{setLoginDetails:function(t,e){var a=e.user;t.user=a},logoff:function(t){t.user={}}}},C={state:{currentChat:{},currentChatMembers:[],accessibleChats:[]},getters:{getCurrentChat:function(t){return t.currentChat},getAccessibleChats:function(t){return t.accessibleChats},getMembers:function(t){return t.currentChatMembers}},actions:{createChatroom:function(t,e){var a=t.commit;return d()({method:"POST",url:"https://chatterbox-be.herokuapp.com/api/chatrooms/create",contentType:"application/json; charset=utf-8",dataType:"json",headers:{Token:k.getters.getToken},data:{chat:e}}).then(function(t){a("addChat",t.data)})},joinChatroom:function(t,e){var a=t.commit;return d()({method:"POST",url:"https://chatterbox-be.herokuapp.com/api/invite/join",contentType:"application/json; charset=utf-8",dataType:"json",headers:{Token:k.getters.getToken},data:{invite:e}}).then(function(t){a("addChat",t.data)})},updateCurrentChatDetails:function(t){var e=t.commit;return d()({method:"GET",url:"https://chatterbox-be.herokuapp.com/api/chatrooms/chat",contentType:"application/json; charset=utf-8",dataType:"json",headers:{Token:k.getters.getToken},params:{chatId:k.getters.getCurrentChat._id}}).then(function(t){e("setCurrentChat",t)})},setCurrentChat:function(t,e){(0,t.commit)("setCurrentChat",e)},fetchAccessibleChats:function(t){var e=t.commit;return d()({method:"GET",url:"https://chatterbox-be.herokuapp.com/api/chatrooms/yourchats",contentType:"application/json; charset=utf-8",dataType:"json",headers:{Token:k.getters.getToken}}).then(function(t){e("setAccessibleChats",t)})},fetchChatMembers:function(t){var e=t.commit;return d.a.get("https://chatterbox-be.herokuapp.com/api/chatrooms/chatmembers",{contentType:"application/json; charset=utf-8",dataType:"json",headers:{Token:k.getters.getToken},params:{chatId:k.getters.getCurrentChat._id}}).then(function(t){e("setMembers",t)})},clearChatrooms:function(t){(0,t.commit)("clearChatrooms")}},mutations:{setCurrentChat:function(t,e){t.currentChat=e},addChat:function(t,e){t.accessibleChats.push(e)},setAccessibleChats:function(t,e){t.accessibleChats=e.data},setMembers:function(t,e){t.currentChatMembers=e.data},clearChatrooms:function(t){t.currentChat={},t.currentChatMembers=[],t.accessibleChats=[]}}},T={state:{messages:[]},getters:{getMessages:function(t){return t.messages}},actions:{sendMessage:function(t,e){var a=t.commit;return d()({method:"POST",url:"https://chatterbox-be.herokuapp.com/api/chat/create",contentType:"application/json; charset=utf-8",dataType:"json",headers:{Token:k.getters.getToken},data:{message:e}}).then(function(){a("nothing")})},receiveMessage:function(t,e){(0,t.commit)("addNewMessage",e)},clearMessages:function(t){(0,t.commit)("clearMessages")},fetchMessagesInChat:function(t){var e=t.commit;return d.a.get("https://chatterbox-be.herokuapp.com/api/chat/chatmessages",{contentType:"application/json; charset=utf-8",dataType:"json",headers:{Token:k.getters.getToken},params:{chatId:k.getters.getCurrentChat._id}}).then(function(t){e("setMessages",t)})}},mutations:{setMessages:function(t,e){t.messages=e.data},addNewMessage:function(t,e){t.messages.push(e)},clearMessages:function(t){t.messages=[]},nothing:function(){}}};n.a.use(p.a);var k=new p.a.Store({plugins:[Object(m.a)()],modules:{auth:b,chatroom:C,chat:T}});n.a.use(h.a);var M=new h.a({mode:"history",routes:[{path:"/",name:"ChatRoom",component:function(){return a.e(0).then(a.bind(null,"Wn5s"))},meta:{title:"Chatterbox"}},{path:"/login",name:"Authentication",component:function(){return a.e(1).then(a.bind(null,"71iP"))},meta:{title:"Chatterbox - Auth"}}]});M.beforeEach(function(t,e,a){document.title=t.meta.title,k.getters.isAuthenticated||"Authentication"===t.name?k.getters.isAuthenticated&&"Authentication"===t.name?a("/"):a():a("/login")});var j=M;n.a.config.productionTip=!1,n.a.use(c.a),n.a.use(s.a,"https://chatterbox-be.herokuapp.com/api".substring(0,"https://chatterbox-be.herokuapp.com/api".length-4)),new n.a({el:"#app",router:j,store:k,components:{App:u},template:"<App/>"})},doPI:function(t,e){},zqPf:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.6e794cb46bf65912bef6.js.map